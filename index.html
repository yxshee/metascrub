<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MetaScrub - Advanced Image Sanitizer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="code/style.css">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="logo">
                <i class="fas fa-shield-alt"></i> MetaScrub
            </div>
            <p>Securely remove metadata and control your image output.</p>
            <div class="theme-switch-wrapper">
                <label class="theme-switch" for="themeToggleCheckbox">
                    <input type="checkbox" id="themeToggleCheckbox" />
                    <div class="slider round">
                        <span class="icon sun"><i class="fas fa-sun"></i></span>
                        <span class="icon moon"><i class="fas fa-moon"></i></span>
                    </div>
                </label>
            </div>
        </header>

        <main class="app-main">
            <section class="input-section">
                <div id="dropZone" class="drop-zone">
                    <i class="fas fa-cloud-upload-alt fa-3x"></i>
                    <p><strong>Drag & Drop images here</strong></p>
                    <p>or</p>
                    <input type="file" id="imageUpload" accept="image/jpeg, image/png, image/webp, image/bmp, image/gif, image/heic, image/heif" multiple hidden>
                    <label for="imageUpload" class="upload-button"><i class="fas fa-file-image"></i> Choose Files</label>
                    <p class="paste-instruction">You can also paste images from your clipboard (Ctrl+V / Cmd+V).</p>
                </div>
                 <div id="file-summary" class="file-summary"></div>
            </section>

            <section class="options-section" id="optionsSection" style="display: none;">
                <h3><i class="fas fa-cogs"></i> Output Options</h3>
                <div class="option-group">
                    <label for="outputFormat">Output Format:</label>
                    <select id="outputFormat">
                        <option value="original">Keep Original (or PNG for complex/HEIC)</option>
                        <option value="image/jpeg">JPEG</option>
                        <option value="image/png">PNG</option>
                    </select>
                </div>
                <div class="option-group" id="jpegQualityGroup" style="display: none;">
                    <label for="jpegQuality">JPEG Quality (0.1 - 1.0):</label>
                    <input type="number" id="jpegQuality" min="0.1" max="1.0" step="0.05" value="0.92">
                </div>
            </section>

            <div id="processing-indicator" class="processing-indicator" style="display: none;">
                <i class="fas fa-spinner fa-spin"></i> Processing images...
            </div>
            <div id="global-error-message" class="message error-message" style="display: none;"></div>

            <section class="results-section" id="resultsSection">
                <!-- Results will be populated here -->
            </section>

            <button id="downloadAllButton" class="action-button" style="display: none;">
                <i class="fas fa-file-archive"></i> Download All as ZIP
            </button>
        </main>

        <footer class="app-footer">
            <p><i class="fas fa-lock"></i> All processing is done 100% locally in your browser. Your images are never uploaded to any server.</p>
        </footer>
    </div>

    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/exifr@7.1.3/dist/full.legacy.js"></script> <!-- For EXIF/Metadata Reading -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="code/app.js"></script>
</body>
</html>